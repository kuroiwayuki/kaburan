<div class="w-full max-w-2xl mx-auto">
  <div class="bg-white border border-gray-200 rounded-lg shadow-md overflow-hidden">
    <!-- カラフルなグラデーションバー -->
    <div class="h-2 bg-gradient-to-r from-green-400 via-green-300 to-green-200"></div>
    
    <div class="px-6 py-8">
      <h2 class="text-2xl font-bold text-gray-900 mb-6 text-center">グループ作成完了</h2>
      
      <div class="text-center mb-8">
        <p class="text-lg text-gray-700 mb-2">家族グループ「<span class="font-semibold text-green-600"><%= @household.name %></span>」を作成しました</p>
        <p class="text-sm text-gray-600 mb-6">他のメンバーを招待するには、以下の招待コードを共有してください</p>
      </div>

      <!-- 招待コード表示 -->
      <div class="bg-green-50 border-2 border-green-200 rounded-lg p-6 mb-6">
        <label class="block text-sm font-semibold text-gray-700 mb-3 text-center">招待コード</label>
        <div class="flex items-center justify-center space-x-3">
          <div class="bg-white border-2 border-green-300 rounded-lg px-6 py-4">
            <span id="invite-code" class="text-3xl font-bold text-green-600 tracking-wider font-mono"><%= @household.invite_code %></span>
          </div>
          <button 
            id="copy-button"
            onclick="copyInviteCode()"
            class="px-4 py-4 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-all font-medium flex items-center space-x-2 shadow-md hover:shadow-lg"
            title="コピー">
            <svg id="copy-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
            </svg>
            <svg id="check-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
          </button>
        </div>
        <p id="copy-message" class="text-sm text-green-600 text-center mt-3 hidden">コピーしました！</p>
      </div>

      <!-- 説明 -->
      <div class="bg-gray-50 rounded-lg p-4 mb-6">
        <p class="text-sm text-gray-600 text-center">
          <svg class="w-5 h-5 inline-block mr-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          このコードを家族や同居人に共有して、グループに参加してもらいましょう
        </p>
      </div>

      <!-- ボタン -->
      <div class="flex gap-3">
        <%= link_to root_path, class: "flex-1 text-center px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-all font-medium shadow-md hover:shadow-lg" do %>
          買い物メモへ
        <% end %>
      </div>
    </div>
  </div>
</div>

<script>
  function copyInviteCode() {
    const inviteCode = document.getElementById('invite-code').textContent;
    const copyButton = document.getElementById('copy-button');
    const copyIcon = document.getElementById('copy-icon');
    const checkIcon = document.getElementById('check-icon');
    const copyMessage = document.getElementById('copy-message');

    // クリップボードにコピー
    navigator.clipboard.writeText(inviteCode).then(function() {
      // アイコンを切り替え
      copyIcon.classList.add('hidden');
      checkIcon.classList.remove('hidden');
      copyMessage.classList.remove('hidden');
      
      // 2秒後に元に戻す
      setTimeout(function() {
        copyIcon.classList.remove('hidden');
        checkIcon.classList.add('hidden');
        copyMessage.classList.add('hidden');
      }, 2000);
    }).catch(function(err) {
      // フォールバック: テキストエリアを使用
      const textArea = document.createElement('textarea');
      textArea.value = inviteCode;
      textArea.style.position = 'fixed';
      textArea.style.opacity = '0';
      document.body.appendChild(textArea);
      textArea.select();
      try {
        document.execCommand('copy');
        copyIcon.classList.add('hidden');
        checkIcon.classList.remove('hidden');
        copyMessage.classList.remove('hidden');
        setTimeout(function() {
          copyIcon.classList.remove('hidden');
          checkIcon.classList.add('hidden');
          copyMessage.classList.add('hidden');
        }, 2000);
      } catch (err) {
        alert('コピーに失敗しました');
      }
      document.body.removeChild(textArea);
    });
  }
</script>

