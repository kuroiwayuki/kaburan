# Kaburan — 家族の買い被り（買い物の重複）を防ぐ共有アプリ

家族・同居人間の「同じ物を二重に買ってしまう」問題を減らすための、共有型の買い物リストアプリです。家族グループでリストを共有し、登録時の軽いアラートで重複購入を抑止します。

---

## サービス概要

- 家族グループを作成し、メンバー間で買い物リストをリアルタイム共有
- 同一・類似アイテムの登録時に軽いアラートを表示して重複購入を防止
- 「購入済み」へ変更して進捗を可視化

---

## このサービスへの思い・作りたい理由

祖母と暮らす中で、意図せぬ“買い被り”が発生し、食品を無駄にしてしまうことがありました。家族で気軽に買い物情報を共有できる仕組みがあれば、この無駄を減らせると考え、本サービスを企画・開発しました。祖母と同居していた頃、私が帰りに「牛乳」を買って帰ると、祖母も同じタイミングで買ってきてしまい、冷蔵庫に同じ商品が2〜3本並ぶことが何度かありました。祖母は「悪いと思ってないけど、何を買うか忘れてしまう」と話しており、責める対象は誰もいないのに、食材を無駄にしてしまう後味の悪さだけが残る——この小さな不幸を減らしたいと感じました。
そこで「家族単位で、“今なにが必要で、誰が買ったか”を簡単に合わせられる」ツールを作れば、重複購入は自然に減り、ちょっとお互いに優しい暮らしになるのでは、と考えたことが開発の出発点です。

---

## 想定ユーザー

- 家族や同居人（核家族・二世帯家庭など）
- シェアハウス・同棲カップル

最も「誰が何を買う／買ったか」を共有するニーズが強い層を対象にしています。

---

## 利用イメージ

1. 家族グループを作成し、メンバーが参加
2. 買い物予定をリストに登録
3. 他メンバーがリアルタイムで閲覧・更新
4. 既存と同じ商品が登録される場合は軽くアラート表示
5. 購入したら「購入済み」に変更し、全員が確認可能

---

## 操作負担を減らす工夫

- よく買う商品の候補リスト（お気に入り/定番）
  - 家族ごとの「定番」をワンタップ追加（例: 牛乳/食パン/卵）
- 履歴からのクイック追加
  - 最近買ったものを候補表示して再登録を1タップ化
- 入力支援
  - かな/カナ・全半角の自動正規化、候補サジェスト
- 将来の拡張（MVP以降の本リリースでは）
  - 音声入力、バーコード/レシートOCRによる自動入力、曜日/頻度ベースの提案

---

## 類似サービスとの比較と差別化

| 観点 | 他サービス（例: Google Keep 等） | 本サービス「かぶらん」の強み |
| --- | --- | --- |
| 家族間での共有性 | 共有は可能だが、家族の買い物に最適化されておらず重複購入の抑止は弱い | 家族（household）単位で共有。登録時に同一・類似商品の重複を軽いアラートで通知することでメモミスの防止 |
| 重複購入の抑止 | 明示的な重複検知はない | 表記ゆれ対応（全半角/かなカナ等の正規化＋前方一致）で重複を検出し提示 |
| 時系列の購買管理 | 「いつ買ったか」を体系的に追いづらい | 追加/購入/更新をタイムライン化。「直近購入済みなら警告」で無駄買いを回避 |
| 操作体験（買い物特化） | 汎用メモのため、購入フローが分散しがち（多機能なため買い物に特化しておらず操作が煩雑） | 追加→購入→完了がワンタップで即時反映（Hotwire + Stimulus） |
| リアルタイム同期 | 標準では同時編集の即時性が弱い | Turbo Streams により家族全員へリアルタイム同期 |
| 権限/範囲設計 | 個人/任意共有が中心 | 家族グループ前提で閲覧・編集範囲を明確化（家庭内に限定） |
| 将来拡張 | 購買学習や提案は想定外 | 家族の購買履歴から頻度・季節性を学習し、必要品の事前提案を予定 |

---

## 機能

### MVP（実装予定）
- ユーザー登録 / ログイン（Devise）
- 家族グループ（Household）の作成 / 参加
- 買い物リスト（Item）の登録・編集・削除
- リアルタイム共有（Turbo Streams）
- 登録時の重複検知・アラート表示（Stimulus + Ajax）
- 購入済みチェック
- タイムライン表示（更新履歴）

### 本リリースでの追加候補
- レシートOCRによる自動登録
- カテゴリ別フィルタリング（食品 / 日用品等）
- リマインド通知
- 購入履歴のグラフ表示（Chartkick）
- コメント・メモ機能

---

## 画面構成（MVP想定）

1. ログインページ（登録・ログイン）
2. グループページ（作成・招待）
3. ホーム（タイムライン）
4. リスト追加ページ（重複アラート付き登録）
5. リスト詳細ページ（購入済み更新、コメント）
6. 履歴ページ（購入済み記録）

スクリーンショット（例）:
- docs/screenshots/login.png
- docs/screenshots/list.png
- docs/screenshots/detail.png

---

## 画面構成（MVP想定）

1. **ログインページ**（登録・ログイン）
   - Sign up / Sign in
   - Deviseを使用

2. **グループページ**（作成・招待）
   - Household作成フォーム
   - 招待コード入力フォーム
   - 参加済みHousehold一覧

3. **ホーム（タイムライン）** - Memo一覧ページ
   - Household内のMemosを時系列（新しい順）で表示
   - 各Memo内に複数のItemsを表示
   - 各Itemに購入済み/未購入の状態を表示
   - 「新規メモ作成」ボタン
   - 購入済みにしてもメモは消えず、フラグがつくだけ

4. **Memo作成ページ**（重複アラート付き登録）
   - 複数のItemを追加できるフォーム
   - 動的にItem入力欄を追加
   - 各Item登録時に重複検知（正規化＋前方一致）
   - 類似アイテムがある場合はflashでアラート表示

5. **Memo編集ページ**
   - Memo内のItemsを編集
   - Itemの追加・削除
   - Item名の修正

6. **履歴ページ**（ItemHistoriesタイムライン）
   - Household内の全アクション（作成・更新・購入）を時系列表示
   - 「誰が・いつ・何をしたか」を表示

スクリーンショット（例）:
- docs/screenshots/login.png
- docs/screenshots/timeline.png
- docs/screenshots/memo_create.png
- docs/screenshots/history.png絵きれ

## 技術スタック

- フレームワーク: Ruby on Rails 7.x（Hotwire構成）
- 言語: Ruby 3.x / JavaScript (ES6) / Stimulus.js
- データベース: PostgreSQL
- 認証: Devise
- リアルタイム: Turbo Streams
- スタイル: Tailwind CSS
- デプロイ候補: Render / Fly.io / Heroku
- 主なライブラリ: devise / turbo-rails / stimulus-rails / pg / chartkick / groupdate など

---

## デプロイ方針

候補:
- Render / Fly.io　

選定基準:
- セットアップ時間（MVP最短リリース）
- 料金とスリープ挙動（レビュー時の安定アクセス）
- PostgreSQLのマネージド有無
- Rails 7 + WebSocket（Turbo）の相性

結論:
- MVPは Render を第一候補とします（Webサービス + Managed PostgreSQL で最短に立ち上げやすい）。
- 将来的にリージョン/常時稼働/ネットワーク制御が必要になれば Fly.io を検討（既にDocker運用のため移行容易）。